<!-- app/templates/base_single_item.html -->
<!-- this form is used for adding a user as well for editing a user, hence the if-clause -->

{% import "bootstrap/wtf.html" as wtf %}
{% import "bootstrap/utils.html" as utils %}
{% extends "base.html" %}

{% block content2 %}
<div class="content-section">
    <div class="center">
        <h1>{{title}}</h1>
        <br/>
        {% if role == "add" %}
            <form action="{{ url_for(subject + '.add')}}" method="post" class="form" role="form">
        {% else %}
            <form id="base-single-action" action="" method="post" class="form" role="form"  enctype=multipart/form-data>
        {% endif %}
                {{ form.csrf_token }}

                {% block content3 %}
                {% endblock %}

                {% if current_user.is_at_least_user_plus %}
                    {% if role == "view" %}
                        {% if current_user.is_authenticated %}
                            <a class="btn btn-default" href="{{ url_for(subject + '.edit', id=form.id.data) }}">Pas aan</a>
                        {% else %}
                            <a class="btn btn-default"
                           href="{{ url_for('auth.login', redirect_url=url_for(subject + '.edit', id=form.id.data)) }}">Pas aan</a>
                        {% endif %}
                    {% else %}
                        <input class="btn btn-default" id="submit" name="button" type="submit" value="Bewaar">
                    {% endif %}
                {% endif %}
                <a class="btn btn-default" href="javascript:history.back()">Annuleer</a>
            </form>
    </div>
</div>
{% endblock %}
{% block scripts %}
{{ super() }}
<script type="text/javascript"> {% include "base_single_item.js" %}</script>
{% endblock %}